{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Fantasy Challenge{% endblock %}</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">

</head>

<body>
  <header class="header large-header">
    <div class="container header-container">
      <div class="full-height">
        <div class="d-flex align-items-center">
          <img src="{% static 'images/logo-GQ.png' %}" alt="Logo" class="me-3" style="height: 190px; width: auto;">
          <div>
            <div class="logo-title">PangaSquadii</div>
            <h1>Fantasy Challenge</h1>
          </div>
        </div>
        <div>
          <nav class="nav-container d-flex justify-content-center">
            <ul class="nav nav-tabs mb-0">
              <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
                  href="/">Home</a>
              </li>

              {% if user.is_authenticated %}
              <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'manage_team' or request.resolver_match.url_name == 'team_selection' %}active{% endif %}"
                  href="{% url 'manage_team' %}">Manage Team</a>
              </li>
              <li  id="leagueButton" class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'league' or request.resolver_match.url_name == 'join-league' or request.resolver_match.url_name == 'create-league' %}active{% endif %}"
                  href="{% url 'league' %}">Leagues</a>
              </li>

              {% endif %}

              <li class="nav-item menu-nav-tab-2a">
                <a class="nav-link {% if request.resolver_match.url_name == 'statistics' %}active{% endif %}"
                  href="{% url 'statistics' %}">Statistics</a>
              </li>

              {% if user.is_authenticated %}
              <li class="nav-item menu-nav-tab">
                <a class="nav-link" href="#">Profile</a>
              </li>
              <li class="nav-item menu-nav-tab-1a">
                <a class="nav-link" href="#">Prize</a>
              </li>
              <li class="nav-item dropdown more-nav-tab">
                <a class="nav-link dropdown-toggle" href="#" id="moreDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">More</a>
                <ul class="dropdown-menu" aria-labelledby="moreDropdown">
                  <li>
                    <a class="dropdown-item menu-nav-tab-2b {% if request.resolver_match.url_name == 'statistics' %}active{% endif %}"
                      href="{% url 'statistics' %}">Statistics</a>
                  </li>
                  <li><a class="dropdown-item" href="#">Profile</a></li>
                  <li><a class="dropdown-item menu-nav-tab-1b" href="#">Prize</a></li>
                  <li>
                    <form method="post" action="{% url 'logout' %}">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-link nav-link">Sign Out</button>
                    </form>
                  </li>
                </ul>
              </li>
              <li class="nav-item menu-nav-tab">
                <form method="post" action="{% url 'logout' %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-link nav-link">Sign Out</button>
                </form>
              </li>
              {% endif %}
            </ul>
          </nav>
        </div>
      </div>
      <img src="{% static 'images/players.png' %}" alt="Players">
    </div>
  </header>

  <header class="header small-header">
    <div class="container">
      <div class="row align-items-center justify-content-between">
        <div class="col d-flex align-items-center mt-4">
          <img src="{% static 'images/logo-GQ.png' %}" alt="Logo" class="me-2 img-fluid" style="max-height: 50px;">
          <div>
            <div class="logo-title">PangaSquadii</div>
            <h1>Fantasy Challenge</h1>
          </div>
        </div>
        <div class="col-auto mt-4">
          <button class="navbar-toggler menu-icon" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
      <div class="collapse mt-3" id="navMenu">
        <ul class="nav nav-tabs flex-column">
          <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="/">Home</a>
          </li>

          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'manage_team'  or request.resolver_match.url_name == 'team_selection' %}active{% endif %}"
              href="{% url 'manage_team' %}">Manage Team</a>
          </li>
          <li id="leagueButton1" class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'league' or request.resolver_match.url_name == 'join-league' or request.resolver_match.url_name == 'create-league' %}active{% endif %}"
              href="{% url 'league' %}">Leagues</a>
          </li>
          {% endif %}

          <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'statistics' %}active{% endif %}"
              href="{% url 'statistics' %}">Statistics</a>
          </li>

          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="#">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Prize</a>
          </li>
          <li class="nav-item">
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-link nav-link">Sign Out</button>
            </form>
          </li>
          {% endif %}
        </ul>
      </div>
      <div class="row mt-3">
        <div class="col-12">
          <img src="{% static 'images/players.png' %}" alt="Players" class="player-image img-fluid w-100">
        </div>
      </div>
    </div>
  </header>
  {% if messages %}
  <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1050;">
    {% for message in messages %}
    <div class="toast align-items-center text-white bg-{{ message.tags }} border-0" role="alert" aria-live="assertive"
      aria-atomic="true" data-bs-autohide="true" data-bs-delay="3000">
      <div class="d-flex">
        <div class="toast-body">
          {{ message }}
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <main>
    {% block content %}
    {% endblock %}
  </main>

  <div class="sponsors-section">
    <div class="sponsors-container">
      <div class="sponsor-item">
        <img src="{% static 'images/ea-sports.png' %}" alt="EA Sports">
        <p>Lead Partner</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/barclays.png' %}" alt="Barclays">
        <p>Official Bank</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/guinness.png' %}" alt="Guinness">
        <p>Official Beer</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/hublot.png' %}" alt="Hublot">
        <p>Official Timekeeper</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/nike.png' %}" alt="Nike">
        <p>Official Ball</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/oracle.png' %}" alt="Oracle">
        <p>Official Cloud Partner</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/panini.png' %}" alt="Panini">
        <p>Official Licensee</p>
      </div>
      <div class="sponsor-item">
        <img src="{% static 'images/sorare.png' %}" alt="Sorare">
        <p>Official Licensee</p>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-section">
        <h6>PangaSquadii</h6>
        <p>PangaSquadii (Pty) Ltd trading as PangaSquadii</p>
        <p>Private Company</p>
        <p>Tax ID: xxxxxxxxxx</p>
        <p>VAT number: xxxxxxxxxx</p>
        <p>Registration number: xxx/xxxxxx/xx</p>
        <!-- <p>Kenilworth Racing's HQ, 105 Rosmead Avenue, Kenilworth Cape Town, Western Cape, 7700</p> -->
      </div>
      <div class="footer-section">
        <ul>
          <li><a href="#">How to Play</a></li>
          <li><a href="#">Terms and Conditions</a></li>
          <li><a href="#">Affiliates</a></li>
          <li><a href="#">Forgot Password</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <ul>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Referral Reward</a></li>
          <li><a href="#">FAQs</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h6>Responsible Gambling</h6>
        <p>PangaSquadii supports Responsible Gambling. No persons under the age of 18 shall be permitted to bet.</p>
        <p>Betting can be addictive. Winners know when to stop.</p>
        <p>For help, call the SA Responsible Gambling Foundation toll-free counseling line: xxxx xxx xxx</p>
      </div>
      <div class="footer-social">
        <a href="#"><i class="fab fa-youtube"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 PangaSquadii. All rights reserved.</p>
        <p>Powered by PangaSquadii Team | Version 1.1.8</p>
      </div>
    </div>
  </footer>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const toastElements = document.querySelectorAll(".toast");
      toastElements.forEach((toastEl) => {
        const toast = new bootstrap.Toast(toastEl);
        toast.show();
      });
    });
  </script>

  <!-- Hide link -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Fetch team status on page load
        fetch("/api/check-team-status/", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            },
        })
            .then((response) => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error("Failed to fetch team status.");
            })
            .then((data) => {
              // console.log(data)
                const leagueButton = document.getElementById("leagueButton");
                const leagueButton1 = document.getElementById("leagueButton1");
                if (!data.team_exists) {
                    // Hide the league button if the team does not exist
                    leagueButton.style.display = "none";
                    leagueButton1.style.display = "none";
                }
            })
            .catch((error) => {
                console.error("Error fetching team status:", error);
            });
    });
  </script>
  

</body>

</html>